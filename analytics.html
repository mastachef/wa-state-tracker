---
layout: default
title: Analytics
description: Visual breakdown of Washington State legislation by threat level, chamber, and status.
permalink: /analytics/
---

<section class="page-header">
  <h1>Bill Analytics</h1>
  <p>Visual breakdown of {{ site.data.bills.size }} bills in the {{ site.current_session }} session.</p>
</section>

<section class="analytics-grid">
  <!-- Threat Level Distribution -->
  <div class="analytics-card">
    <h2>Threat Level Distribution</h2>
    <div class="chart-container">
      {% assign critical = site.data.bills | where: "threat_level", "critical" | size %}
      {% assign high = site.data.bills | where: "threat_level", "high" | size %}
      {% assign moderate = site.data.bills | where: "threat_level", "moderate" | size %}
      {% assign low = site.data.bills | where: "threat_level", "low" | size %}
      {% assign beneficial = site.data.bills | where: "threat_level", "beneficial" | size %}
      {% assign total = site.data.bills.size %}

      <div class="bar-chart">
        <div class="bar-row">
          <span class="bar-label">Critical</span>
          <div class="bar-container">
            <div class="bar bar-critical" style="width: {% if total > 0 %}{{ critical | times: 100.0 | divided_by: total }}%{% else %}0{% endif %}"></div>
          </div>
          <span class="bar-value">{{ critical }}</span>
        </div>
        <div class="bar-row">
          <span class="bar-label">High</span>
          <div class="bar-container">
            <div class="bar bar-high" style="width: {% if total > 0 %}{{ high | times: 100.0 | divided_by: total }}%{% else %}0{% endif %}"></div>
          </div>
          <span class="bar-value">{{ high }}</span>
        </div>
        <div class="bar-row">
          <span class="bar-label">Moderate</span>
          <div class="bar-container">
            <div class="bar bar-moderate" style="width: {% if total > 0 %}{{ moderate | times: 100.0 | divided_by: total }}%{% else %}0{% endif %}"></div>
          </div>
          <span class="bar-value">{{ moderate }}</span>
        </div>
        <div class="bar-row">
          <span class="bar-label">Low</span>
          <div class="bar-container">
            <div class="bar bar-low" style="width: {% if total > 0 %}{{ low | times: 100.0 | divided_by: total }}%{% else %}0{% endif %}"></div>
          </div>
          <span class="bar-value">{{ low }}</span>
        </div>
        <div class="bar-row">
          <span class="bar-label">Beneficial</span>
          <div class="bar-container">
            <div class="bar bar-beneficial" style="width: {% if total > 0 %}{{ beneficial | times: 100.0 | divided_by: total }}%{% else %}0{% endif %}"></div>
          </div>
          <span class="bar-value">{{ beneficial }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Chamber Breakdown -->
  <div class="analytics-card">
    <h2>By Chamber</h2>
    <div class="chart-container">
      {% assign house = site.data.bills | where: "chamber", "House" | size %}
      {% assign senate = site.data.bills | where: "chamber", "Senate" | size %}

      <div class="donut-stats">
        <div class="donut-stat">
          <span class="donut-number house-color">{{ house }}</span>
          <span class="donut-label">House Bills</span>
        </div>
        <div class="donut-stat">
          <span class="donut-number senate-color">{{ senate }}</span>
          <span class="donut-label">Senate Bills</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Status Breakdown -->
  <div class="analytics-card">
    <h2>By Status</h2>
    <div class="chart-container">
      {% assign introduced = site.data.bills | where: "status", "Introduced" | size %}
      {% assign in_committee = site.data.bills | where: "status", "In Committee" | size %}
      {% assign passed = site.data.bills | where: "status", "Passed" | size %}
      {% assign signed = site.data.bills | where: "status", "Signed" | size %}

      <div class="status-grid">
        <div class="status-stat">
          <span class="status-number">{{ introduced }}</span>
          <span class="status-label">Introduced</span>
        </div>
        <div class="status-stat">
          <span class="status-number">{{ in_committee }}</span>
          <span class="status-label">In Committee</span>
        </div>
        <div class="status-stat">
          <span class="status-number">{{ passed }}</span>
          <span class="status-label">Passed</span>
        </div>
        <div class="status-stat">
          <span class="status-number">{{ signed }}</span>
          <span class="status-label">Signed</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="analytics-card">
    <h2>Quick Stats</h2>
    <div class="quick-stats-list">
      <div class="quick-stat-row">
        <span class="quick-stat-label">Total Bills</span>
        <span class="quick-stat-value">{{ site.data.bills.size }}</span>
      </div>
      <div class="quick-stat-row">
        <span class="quick-stat-label">High Priority (Critical + High)</span>
        <span class="quick-stat-value highlight-danger">{{ critical | plus: high }}</span>
      </div>
      <div class="quick-stat-row">
        <span class="quick-stat-label">Positive Bills (Low + Beneficial)</span>
        <span class="quick-stat-value highlight-success">{{ low | plus: beneficial }}</span>
      </div>
      <div class="quick-stat-row">
        <span class="quick-stat-label">Threat Ratio</span>
        <span class="quick-stat-value">{{ critical | plus: high }}:{{ low | plus: beneficial }}</span>
      </div>
    </div>
  </div>
</section>

<!-- Critical Bills Section -->
<section class="analytics-section">
  <h2>Critical Threat Bills</h2>
  <p class="section-desc">These {{ critical }} bills pose the highest threat and need immediate attention.</p>

  {% assign critical_bills = site.data.bills | where: "threat_level", "critical" %}
  {% if critical_bills.size > 0 %}
  <div class="bills-grid">
    {% for bill in critical_bills limit: 6 %}
      {% include bill-card.html bill=bill %}
    {% endfor %}
  </div>
  {% if critical_bills.size > 6 %}
  <div class="section-footer">
    <a href="{{ '/all-bills/?threat=critical' | relative_url }}" class="btn btn-secondary">View All {{ critical }} Critical Bills</a>
  </div>
  {% endif %}
  {% else %}
  <p class="empty-state">No critical threat bills found.</p>
  {% endif %}
</section>

<!-- Beneficial Bills Section -->
<section class="analytics-section">
  <h2>Beneficial Bills</h2>
  <p class="section-desc">Bills that could reduce government power or expand liberty.</p>

  {% assign good_bills = site.data.bills | where: "threat_level", "beneficial" %}
  {% assign low_bills = site.data.bills | where: "threat_level", "low" %}
  {% if good_bills.size > 0 or low_bills.size > 0 %}
  <div class="bills-grid">
    {% for bill in good_bills limit: 3 %}
      {% include bill-card.html bill=bill %}
    {% endfor %}
    {% for bill in low_bills limit: 3 %}
      {% include bill-card.html bill=bill %}
    {% endfor %}
  </div>
  <div class="section-footer">
    <a href="{{ '/all-bills/?threat=beneficial' | relative_url }}" class="btn btn-secondary">View All Beneficial Bills</a>
    <a href="{{ '/all-bills/?threat=low' | relative_url }}" class="btn btn-secondary">View All Low Threat Bills</a>
  </div>
  {% else %}
  <p class="empty-state">No beneficial bills found yet.</p>
  {% endif %}
</section>

<style>
/* Analytics Page Styles */
.analytics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-6);
  margin-bottom: var(--space-12);
}

.analytics-card {
  background: var(--color-bg-medium);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  border: 1px solid var(--color-border);
}

.analytics-card h2 {
  font-size: 1.125rem;
  margin-bottom: var(--space-4);
  padding-bottom: var(--space-2);
  border-bottom: 1px solid var(--color-border);
}

/* Bar Chart */
.bar-chart {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.bar-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.bar-label {
  width: 80px;
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.bar-container {
  flex: 1;
  height: 24px;
  background: var(--color-bg-dark);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.bar {
  height: 100%;
  border-radius: var(--radius-sm);
  min-width: 2px;
}

.bar-critical { background: #dc2626; }
.bar-high { background: #ea580c; }
.bar-moderate { background: #ca8a04; }
.bar-low { background: #16a34a; }
.bar-beneficial { background: #059669; }

.bar-value {
  width: 50px;
  text-align: right;
  font-weight: 600;
  font-size: 0.875rem;
}

/* Donut Stats */
.donut-stats {
  display: flex;
  justify-content: space-around;
  padding: var(--space-4) 0;
}

.donut-stat {
  text-align: center;
}

.donut-number {
  display: block;
  font-size: 2.5rem;
  font-weight: 700;
}

.donut-label {
  font-size: 0.875rem;
  color: var(--color-text-muted);
}

.house-color { color: #3b82f6; }
.senate-color { color: #8b5cf6; }

/* Status Grid */
.status-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-4);
}

.status-stat {
  text-align: center;
  padding: var(--space-3);
  background: var(--color-bg-dark);
  border-radius: var(--radius);
}

.status-number {
  display: block;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-primary-light);
}

.status-label {
  font-size: 0.75rem;
  color: var(--color-text-muted);
  text-transform: uppercase;
}

/* Quick Stats List */
.quick-stats-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.quick-stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2) 0;
  border-bottom: 1px solid var(--color-border);
}

.quick-stat-row:last-child {
  border-bottom: none;
}

.quick-stat-label {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.quick-stat-value {
  font-weight: 700;
  font-size: 1.125rem;
}

.highlight-danger {
  color: #ef4444;
}

.highlight-success {
  color: #22c55e;
}

/* Analytics Sections */
.analytics-section {
  margin-bottom: var(--space-12);
}

.analytics-section h2 {
  margin-bottom: var(--space-2);
}

.section-desc {
  color: var(--color-text-muted);
  margin-bottom: var(--space-6);
}

.section-footer {
  text-align: center;
  margin-top: var(--space-6);
  display: flex;
  gap: var(--space-3);
  justify-content: center;
  flex-wrap: wrap;
}
</style>
